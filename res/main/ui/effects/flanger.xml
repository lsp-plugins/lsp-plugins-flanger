<plugin resizable="true">
	<grid rows="5" cols="3" spacing="4">
		<!-- Row 1: input meter -->
		<label text="labels.chan.in" />
		<cell cols="2" hexpand="true">
			<!-- Mono meter for mono version -->
			<ui:if test="ex :in">
				<ledmeter hexpand="true" angle="0" bg.inherit="true">
					<ledchannel id="min" min="-36 db" max="+6 db" log="true" type="rms_peak" peak.visibility="true" value.color="mid_in"/>
				</ledmeter>
			</ui:if>
			<!-- Stereo meter for stereo version -->
			<ui:if test="ex :in_l">
				<ledmeter hexpand="true" angle="0" bg.inherit="true">
					<ledchannel id="min_l" min="-36 db" max="+6 db" log="true" type="rms_peak" peak.visibility="true" value.color="left_in"/>
					<ledchannel id="min_r" min="-36 db" max="+6 db" log="true" type="rms_peak" peak.visibility="true" value.color="right_in"/>
				</ledmeter>
			</ui:if>
		</cell>
		
		<!-- Row 2: LFO settings -->
		<cell cols="2">
			<group text="labels.lfo">
				<grid rows="3" cols="(ex :in_l) ? 5 : 4">
					<label text="labels.lfo.rate" />
					<label text="labels.lfo.type" />
					<label text="labels.lfo.phase" />
					<ui:if test="ex :in_l">
						<label text="labels.lfo.difference" />
					</ui:if>
					<label text="actions.reset" />
					
					<knob id="rate" />
					<vbox>
						<combo id="type" />
						<combo id="atype" visibility="ex :in_l" />
					</vbox>
					<knob id="iphase" />
					<ui:if test="ex :in_l">
						<knob id="dphase" />
					</ui:if>
					<button id="reset" size="32" />
					
					<value id="rate" />
					<void />
					<value id="iphase" />
					<ui:if test="ex :in_l">
						<value id="dphase" />
					</ui:if>
					<void />
				</grid>
			</group>
		</cell>
		
		<!-- Row 2: LFO graph -->
		<cell rows="3">
			<graph width.min="320" height.min="320">
				<origin hpos="-1" vpos="1" visibility="false" />
				
				<!-- Grid -->
				<ui:with color="graph_alt_2">
					<marker v="45" />
					<marker v="135" />
					<marker v="225" />
					<marker v="315" />
					<marker v="0.125" ox="1" oy="0" />
					<marker v="0.375" ox="1" oy="0" />
					<marker v="0.625" ox="1" oy="0" />
					<marker v="0.875" ox="1" oy="0" />
				</ui:with>

				<ui:with color="graph_alt_1">
					<marker v="90" />
					<marker v="270" />
					<marker v="0.25" ox="1" oy="0" />
					<marker v="0.75" ox="1" oy="0" />
				</ui:with>

				<ui:with color="graph_sec">
					<marker v="180" />
					<marker v="0.5" ox="1" oy="0" />
				</ui:with>
				
				<ui:with color="graph_prim">
					<marker v="360" />
					<marker v="1" ox="1" oy="0" />
				</ui:with>
				
				<!-- Axes -->
				<axis min="0" max="360" angle="1.5"/>
				<axis min="0" max="1" angle="0"/>
				
				<!-- Mesh -->
				<mesh id="lfo" width="3" color="graph_mesh" smooth="true" visibility="(!ex :atype) or (:atype ieq 0)"/>
				<mesh id="lfo" width="3" color="(ex :ms and :ms) ? 'mid' : 'left'" smooth="true" visibility="(ex :atype) and (:atype ine 0)"/>
				<mesh id="alfo" width="3" color="(ex :ms and :ms) ? 'side' : 'right'" smooth="true" visibility="(ex :atype) and (:atype ine 0)"/>
				
				<!-- Dot -->
				<ui:if test="!(ex :in_r)">
					<marker v=":clsh" ox="1" oy="0" color="graph_mesh" />
					<dot x.id="clph" y.id="clsh" color="graph_mesh" bcolor="graph_mesh"/>
				</ui:if>
				<ui:if test="ex :in_r">
					<marker v=":clsh_l" ox="1" oy="0" color="(:ms) ? 'mid' : 'left'" />
					<marker v=":clsh_r" ox="1" oy="0" color="(:ms) ? 'side' : 'right'" />
					
					<dot x.id="clph_l" y.id="clsh_l" color="(:ms) ? 'mid' : 'left'" bcolor="(:ms) ? 'mid' : 'left'"/>
					<dot x.id="clph_r" y.id="clsh_r" color="(:ms) ? 'side' : 'right" bcolor="(:ms) ? 'side' : 'right'"/>
				</ui:if>
			</graph>
		</cell>
		
		<!-- Row 3: effect settings -->
		<cell cols="2">
			<group text="labels.controls">
				<grid rows="3" cols="8">
					<label text="labels.chan.mid_side" />
					<label text="labels.depth.min" />
					<label text="labels.depth" />
					<label text="labels.signal.phase" />
					<label text="labels.amount" />
					<label text="labels.feedback" />
					<label text="labels.delay" />
					<label text="labels.signal.phase" />
					
					<button id="ms" size="32" />
					<knob id="dmin" />
					<knob id="depth" />
					<button id="sphase" size="32" />
					<knob id="amount" />
					<knob id="fgain" />
					<knob id="fdelay" />
					<button id="fphase" size="32" />
					
					<void />
					<value id="dmin" />
					<value id="depth" />
					<void />
					<value id="amount" />
					<value id="fgain" />
					<value id="fdelay" />
					<void />
				</grid>
			</group>
		</cell>
		
		<cell cols="2">
			<group text="labels.signal">
				<grid rows="3" cols="4">
					<label text="labels.chan.input" />
					<label text="labels.signal.dry" />
					<label text="labels.signal.wet" />
					<label text="labels.chan.output" />
					
					<knob id="g_in" pad.h="6" pad.v="4"/>
					<knob id="dry" scolor="dry" pad.h="6" pad.v="4"/>
					<knob id="wet" scolor="wet" pad.h="6" pad.v="4"/>
					<knob id="g_out" pad.h="6" pad.v="4"/>
				</grid>
			</group>
		</cell>
		
		<!-- Row 4 -->
		<label text="labels.chan.out" />
		<cell cols="2" hexpand="true">
			<!-- Mono meter for mono version -->
			<ui:if test="ex :out">
				<ledmeter hexpand="true" angle="0" bg.inherit="true">
					<ledchannel id="mout" min="-36 db" max="+6 db" log="true" type="rms_peak" peak.visibility="true" value.color="mid"/>
				</ledmeter>
			</ui:if>
			<!-- Stereo meter for stereo version -->
			<ui:if test="ex :out_l">
				<ledmeter hexpand="true" angle="0" bg.inherit="true">
					<ledchannel id="mout_l" min="-36 db" max="+6 db" log="true" type="rms_peak" peak.visibility="true" value.color="left"/>
					<ledchannel id="mout_r" min="-36 db" max="+6 db" log="true" type="rms_peak" peak.visibility="true" value.color="right"/>
				</ledmeter>
			</ui:if>
		</cell>
	</grid>
</plugin>
